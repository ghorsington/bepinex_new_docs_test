<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Setting up the development environment</title>
    <meta name="title" content="Setting up the development environment">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../static/styles/template.css">
    <link rel="stylesheet" href="../../../static/styles/main.css">
    <script>
        var docsVersion = "v5.0";

        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }
    </script>
</head>
<body>
    <header>
        <nav>
            <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../logo.svg" alt="">
            </a>
            <div class="nav">
                <div class="nav-item">
                    <a href="../../../articles/index.html">Articles</a>
                </div>
                <div class="nav-item">
                    <a href="../../../api/index.html">API Documentation</a>
                </div>
            </div>
            <div id="version-picker"></div>
            <a id="theme-switch" class="icon-lightbulb"></a>
        </nav>
    </header>
    <section id="global-messages"></section>
    <section class="breadcrumb">
        <span>
            <a href="../../../articles/index.html">Articles</a>
        </span>
            <span>
            <a href="../../dev_guide/index.html">Plugin development</a>
        </span>
            <span>
                <a href="../../dev_guide/plugin_tutorial/index.html">Walkthrough: writing a basic plugin</a>
            </span>
                <span>
                    <a href="../../dev_guide/plugin_tutorial/1_setup.html">Part I: Setting up the development environment</a>
                </span>
        </section>
    <aside class="toc">
    <span class="toc-menu-button">
        <span>Table of Contents</span>
        <i class="icon-menu"></i>
    </span>
    <div class="toc-items">
    <ul>
        <li>
            <details>
            <summary>
            <a href="../../user_guide/index.html">Using BepInEx</a>
            </summary>
            <ul>
                <li>
                    <a href="../../user_guide/installation.html">Installation</a>
                </li>
                <li>
                    <a href="../../user_guide/configuration.html">Configuration</a>
                </li>
                <li>
                    <a href="../../user_guide/upgrading.html">Upgrading</a>
                </li>
            </ul>        </details>
        </li>
        <li>
            <details open="">
            <summary>
            <a href="../../dev_guide/index.html" class="active">Plugin development</a>
            </summary>
            <ul>
                <li>
                    <details open="">
                    <summary>
                    <a href="../../dev_guide/plugin_tutorial/index.html" class="active">Walkthrough: writing a basic plugin</a>
                    </summary>
                    <ul>
                        <li>
                            <a href="../../dev_guide/plugin_tutorial/1_setup.html" class="active">Part I: Setting up the development environment</a>
                        </li>
                        <li>
                            <a href="../../dev_guide/plugin_tutorial/2_plugin_start.html">Part II: Writing a basic plug-in class</a>
                        </li>
                        <li>
                            <a href="../../dev_guide/plugin_tutorial/3_configuration.html">Part III: Configuration</a>
                        </li>
                        <li>
                            <a href="../../dev_guide/plugin_tutorial/4_logging.html">Part IV: Logging</a>
                        </li>
                        <li>
                            <a href="../../dev_guide/plugin_tutorial/5_distributing.html">Part V: Distributing</a>
                        </li>
                    </ul>        </details>
                </li>
                <li>
                    <a href="../../dev_guide/preloader_patchers.html">How to: writing preloader patchers</a>
                </li>
                <li>
                    <a href="../../dev_guide/harmony_wrapper.html">Runtime patching with HarmonyWrapper</a>
                </li>
            </ul>        </details>
        </li>
        <li>
            <details>
            <summary>
            <a href="../../advanced/index.html">Advanced topics</a>
            </summary>
            <ul>
                <li>
                    <a href="../../advanced/dnspy_debug.html">Debugging BepInEx with dnSpy</a>
                </li>
                <li>
                    <a href="../../advanced/porting.html">Porting to new Unity games</a>
                </li>
                <li>
                    <a href="../../advanced/dotnet_profiles.html">.NET profiles and BepInEx support</a>
                </li>
                <li>
                    <a href="../../advanced/compatibility.html">Compatibility with other modding frameworks</a>
                </li>
                <li>
                    <a href="../../advanced/limitations.html">Known limitations</a>
                </li>
            </ul>        </details>
        </li>
    </ul></div>
    </aside>
    <main class="  ">
<h1 id="setting-up-the-development-environment">Setting up the development environment</h1>

<p>Writing BepInEx plugins starts with creation of the code projects.
In this guide, we will be using <a href="https://visualstudio.microsoft.com/">Visual Studio</a> to create our plugins.</p>
<h2 id="creating-a-solution">Creating a solution</h2>
<p>First, we'll create a new solution in Visual Studio.<br>
Open up Visual Studio and select <code>File &gt; New &gt; Project</code>:</p>
<p><img src="images/vs-new-plugin.png" alt="New project dialog in Visual Studio"></p>
<p>From there, select <code>C# &gt; Class Library</code> as the target project.
You might now notice that there are multiple <code>Class Library</code> templates: one for .NET Standard, one for .NET Framework and some other ones.<br>
The one you select <em>depends on the game and on the plugin you're trying to create</em>.</p>
<p>In essence, select <em>Class Library (.NET Standard)</em> if the game you're targeting has <code>netstandard.dll</code> present in its <code>&lt;GameName&gt;_Data\Managed</code> folder.<br>
Otherwise, select <em>Class Library (.NET Framework)</em>.</p>
<p>Next, fill in the details of your plugin (name, project location).</p>
<p>If you have selected <em>Class Library (.NET Framework)</em> as the project type, you will also notice the <code>Framework</code> option.
This option specifies the version of the .NET Framework that the plugin will be compiled against.<br>
Different Unity may require you to use different .NET Framework versions. As a rule of thumb, you can use .NET Framework 3.5 in all Unity games, but you will get the least API available. In order to determine the exact version of .NET Framework to use, check the file version of <code>mscorlib.dll</code> in <code>&lt;GameName&gt;_Data\Managed</code> folder: if it's <code>4.0.0.0</code> or newer, you can target .NET Framework 4.x (usually 4.6).</p>
<div class="NOTE">
<h5>Note</h5>
<p>Technically, it is possible to target both .NET Standard and .NET Framework games with a single build, but there are a lot of considerations to take into account.
Refer to <a class="xref" href="../../advanced/dotnet_profiles.html">explanation of different .NET profiles in Unity</a> for more information.</p>
</div>
<p>In the case of this test plugin, we'll be writing a plugin for <a href="https://store.steampowered.com/app/632360/Risk_of_Rain_2/">Risk of Rain 2</a>.<br>
Since Risk of Rain 2 is a .NET Standard game (i.e. there is <code>netstandard.dll</code> in <code>Risk of Rain 2_Data\Managed</code> folder), we will choose <em>Class Library (.NET Standard)</em> as the template.</p>
<p>Press OK, which will create the solution folder and the main C# project.</p>
<h2 id="gathering-dll-dependencies">Gathering DLL dependencies</h2>
<p>Before diving into programming, we need to import any DLLs that we will be using.</p>
<p>First, head over to the folder you created your solution in. It should look like this:</p>
<p><img src="images/plugin-folder.png" alt="A basic structure of the plugin folder"></p>
<div class="TIP">
<h5>Tip</h5>
<p>If you forgot the location of the solution, you can right click on the solution file in Visual Studio and select <code>Open Folder in File Explorer</code>:
<img src="images/vs-open-solution.png" alt="Open Folder in File Explorer in Visual Studio"></p>
</div>
<p>Next, create a <code>Libs</code> folder in the solution folder. That folder will contain all the required DLLs that this project will depend on.</p>
<p>Find and copy the following DLLs into the folder:</p>
<ul>
<li><code>BepInEx.dll</code>: found in <code>BepInEx\core</code> folder (you can download BepInEx as per the <a class="xref" href="../../user_guide/installation.html">installation instructions</a>)</li>
<li><code>UnityEngine.dll</code> (and <code>UnityEngine.CoreModule.dll</code> if needed): found in the game's <code>&lt;Game Name&gt;_Data\Managed</code> folder</li>
<li>(Optional) Any additional DLLs and dependencies you think you need (you can always add more DLLs later)
<ul>
<li><code>Assembly-CSharp.dll</code> contains game-specific code</li>
<li><code>0Harmony.dll</code> and <code>BepInEx.Harmony.dll</code> allow to patch methods while the game is running. Refer to <a href="https://github.com/pardeike/Harmony/wiki">Harmony wiki</a> for more details.</li>
</ul>
</li>
</ul>
<p>In the end, your <code>Libs</code> folder might look something like this (<strong>for example</strong>):</p>
<p><img src="images/libs-folder.png" alt="An example of the Libs folder"></p>
<div class="WARNING">
<h5>Warning</h5>
<p>If you are planning on publishing the source code, do not include the DLLs in the <code>Libs</code> folder.<br>
Not only is it unnecessary, but <code>Assembly-CSharp.dll</code> contains game code, which technically is illegal to share without an explicit permission from the game developers.</p>
<p>If you absolutely must include the DLLs, it is suggested to remove the code and only distribute the API contents.</p>
</div>
<h2 id="importing-dll-dependencies-into-the-project">Importing DLL dependencies into the project</h2>
<p>Finally, open your solution in Visual Studio. In there, right click on the <code>Dependencies</code> item in the Solution Explorer (or <code>References</code> if your project is based on .NET Framework) and select <code>Add Reference...</code>:</p>
<p><img src="images/vs-add-references.png" alt="Add References option when you right click the Dependencies in Solution Explorer"></p>
<p>In the opened Reference Manager, click the <code>Browse...</code> button, locate and select <em>all</em> assemblies in <code>Libs</code> folder and click <code>Add</code>.<br>
Finally, click OK to close the Reference Manager and you will have all your dependencies imported:</p>
<p><img src="images/vs-references.png" alt="A list of finally properly imported references"></p>
</main>
    <aside class="affix">
    <div></div>
    </aside>    <footer>
        <div>BepInEx Docs (v5.0)</div>
        <div>Build info: 3a47463; 2021-06-13 23:30:50 +0300</div>
    </footer>
<script type="text/javascript" src="../../../static/scripts/template.js"></script>
<script type="text/javascript" src="../../../static/scripts/main.js"></script>
</body>
</html>